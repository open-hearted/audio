<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>News Audio Sentence Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: sans-serif;
      padding: 1rem;
      background: #f0f2f5;
      max-width: 700px;
      margin: auto;
    }
    .card {
      background: white;
      border: 1px solid #ddd;
      border-radius: 12px;
      padding: 1.2rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }
    h1, h2 {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }
    audio {
      width: 100%;
      margin-top: 0.5rem;
    }
    .status {
      margin-top: 0.5rem;
      font-size: 1rem;
      color: #333;
    }
    .collapsible {
      background-color: #eee;
      cursor: pointer;
      padding: 0.5rem 1rem;
      border: none;
      font-size: 0.95rem;
      margin-top: 0.8rem;
      width: 100%;
      border-radius: 6px;
      text-align: left;
    }
    .collapsible:hover {
      background-color: #ddd;
    }
    .content {
      display: none;
      background-color: #fafafa;
      padding: 1rem;
      border: 1px solid #ccc;
      margin-top: 0.5rem;
      border-radius: 6px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  
  <script>
    // URL „Ç®„É≥„Ç≥„Éº„ÉâÊ∏à„Åø„ÅÆ„Éï„Ç©„É´„ÉÄÂêç
    const baseFile = "September%2023%202024%20%E2%80%93%201000%20UTC%20Heaviest%20Cross-Border%20Strikes%20in%20a%20Year";

    // „Çª„ÇØ„Ç∑„Éß„É≥„Åî„Å®„ÅÆ„Çπ„ÇØ„É™„Éó„Éà
    const sentences = [
      "Smoke was seen rising on Sunday in southern Lebanon near the border with Israel as audio of missiles exploding were heard.",
      "Hezbollah has launched over 100 rockets across a wider and deeper area of northern Israel, with some landing near the city of Haifa as the sides appeared to be increasing tensions following months of escalating fire.",
      "Israel and Hezbollah exchanged heavy fire into Sunday with Israeli warplanes carrying out the most intense bombardment in almost a year of conflict across Lebanon's south and Hezbollah firing rockets deep into northern Israel.",
      "The Israeli military said it struck around 290 targets on Saturday, including thousands of Hezbollah rocket launcher barrels and said it would continue to hit more targets.",
      "That came after an Israeli airstrike in Beirut on Friday that killed at least 37 people, including one of Hezbollah's top leaders, as well as women and children.",
      "The conflict, which sharply escalated over the past week, has raged since Hezbollah opened a second front against Israel after Israel went to war with Hamas in the Palestinian enclave of Gaza triggered by the Hamas-led rampage into southern Israel on October 7th, 2023."
    ];

    function getFormattedDateTime() {
      const now = new Date();
      return `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}-${String(now.getDate()).padStart(2,'0')} ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}`;
    }

    function setupBlock(audioId, statusId, storageKey) {
      const audio = document.getElementById(audioId);
      const status = document.getElementById(statusId);
      const stored = localStorage.getItem(storageKey);
      if (stored) {
        const data = JSON.parse(stored);
        status.textContent = `‚úÖ Played (${data.timestamp})`;
      }
      audio.addEventListener("ended", () => {
        const timestamp = getFormattedDateTime();
        localStorage.setItem(storageKey, JSON.stringify({ played: true, timestamp }));
        status.textContent = `‚úÖ Played (${timestamp})`;
      });
    }

    window.addEventListener("DOMContentLoaded", () => {
      const container = document.body;

      // ÂêÑ„Çª„É≥„ÉÜ„É≥„Çπ„Éñ„É≠„ÉÉ„ÇØ
      sentences.forEach((text, i) => {
        const num = i + 1;
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <h2>Sentence ${num}/${sentences.length}</h2>
          <audio id="audio${num}" controls>
            <source src="./${baseFile}/${num}.mp3" type="audio/mpeg">
          </audio>
          <div class="status" id="status${num}">‚¨ú Not played</div>
          <button class="collapsible">üìú Show Script</button>
          <div class="content">${text}</div>
        `;
        container.appendChild(card);
        setupBlock(`audio${num}`, `status${num}`, `audioPlayed_${num}`);
      });

      // „Éï„É´„Éã„É•„Éº„Çπ„Éñ„É≠„ÉÉ„ÇØ
      const fullCard = document.createElement("div");
      fullCard.className = "card";
      fullCard.innerHTML = `
        <h2>Full News Audio</h2>
        <audio id="audioFull" controls>
          <source src="./${baseFile}/${baseFile}.mp3" type="audio/mpeg">
        </audio>
        <div class="status" id="statusFull">‚¨ú Not played</div>
        <button class="collapsible">üìú Show Full Script</button>
        <div class="content">${sentences.join('\n')}</div>
      `;
      container.appendChild(fullCard);
      setupBlock("audioFull", "statusFull", "audioPlayed_full");

      // Êäò„Çä„Åü„Åü„ÅøÊ©üËÉΩ
      document.querySelectorAll(".collapsible").forEach(btn => {
        btn.addEventListener("click", function() {
          this.classList.toggle("active");
          const content = this.nextElementSibling;
          content.style.display = content.style.display === "block" ? "none" : "block";
        });
      });
    });
  </script>

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>News Audio Sentence Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* ‚Ä¶ÔºàÁúÅÁï•Ôºâ‚Ä¶ */
  </style>
</head>
<body>

  <h1>News Audio Sentence Tracker</h1>

  <script>
    // „ÅÇ„Çâ„Åã„Åò„ÇÅ URL „Ç®„É≥„Ç≥„Éº„Éâ„Åó„Åü„Éï„Ç©„É´„ÉÄÂêç
    const baseFile = "September%2023%202024%20%E2%80%93%201000%20UTC%20Heaviest%20Cross-Border%20Strikes%20in%20a%20Year";

    const sentences = [
      "Smoke was seen rising on Sunday in southern Lebanon near the border with Israel as audio of missiles exploding were heard.",
      // ‚Ä¶ÔºàÁúÅÁï•Ôºâ‚Ä¶
      "The conflict, which sharply escalated over the past week, has raged since Hezbollah opened a second front against Israel after Israel went to war with Hamas in the Palestinian enclave of Gaza triggered by the Hamas-led rampage into southern Israel on October 7th, 2023."
    ];

    function getFormattedDateTime() {
      const now = new Date();
      return `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}-${String(now.getDate()).padStart(2,'0')} ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}`;
    }

    function setupBlock(audioId, statusId, storageKey) {
      const audio = document.getElementById(audioId);
      const status = document.getElementById(statusId);
      const stored = localStorage.getItem(storageKey);
      if (stored) {
        const data = JSON.parse(stored);
        status.textContent = `‚úÖ Played (${data.timestamp})`;
      }
      audio.addEventListener("ended", () => {
        const timestamp = getFormattedDateTime();
        localStorage.setItem(storageKey, JSON.stringify({ played: true, timestamp }));
        status.textContent = `‚úÖ Played (${timestamp})`;
      });
    }

    window.addEventListener("DOMContentLoaded", () => {
      const container = document.body;

      // ÂêÑ„Çª„É≥„ÉÜ„É≥„Çπ„Éñ„É≠„ÉÉ„ÇØ
      sentences.forEach((text, i) => {
        const num = i + 1;
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <h2>Sentence ${num}/${sentences.length}</h2>
          <audio id="audio${num}" controls>
            <source src="./${baseFile}/${num}.mp3" type="audio/mpeg">
          </audio>
          <div class="status" id="status${num}">‚¨ú Not played</div>
          <button class="collapsible">üìú Show Script</button>
          <div class="content">${text}</div>
        `;
        container.appendChild(card);
        setupBlock(`audio${num}`, `status${num}`, `audioPlayed_${num}`);
      });

      // „Éï„É´„Éã„É•„Éº„Çπ„Éñ„É≠„ÉÉ„ÇØ
      const fullCard = document.createElement("div");
      fullCard.className = "card";
      fullCard.innerHTML = `
        <h2>Full News Audio</h2>
        <audio id="audioFull" controls>
          <source src="./${baseFile}/${baseFile}.mp3" type="audio/mpeg">
        </audio>
        <div class="status" id="statusFull">‚¨ú Not played</div>
        <button class="collapsible">üìú Show Full Script</button>
        <div class="content">${sentences.join('\n')}</div>
      `;
      container.appendChild(fullCard);
      setupBlock("audioFull", "statusFull", "audioPlayed_full");

      // Êäò„Çä„Åü„Åü„Åø„Çπ„ÇØ„É™„Éó„Éà
      document.querySelectorAll(".collapsible").forEach(btn => {
        btn.addEventListener("click", function() {
          this.classList.toggle("active");
          const content = this.nextElementSibling;
          content.style.display = content.style.display === "block" ? "none" : "block";
        });
      });
    });
  </script>

</body>
</html>
